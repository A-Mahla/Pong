// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
	provider = "prisma-client-js"
	 previewFeatures = ["filteredRelationCount"]
}

datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

model User {
	id				Int	@id @default(autoincrement())
	createdAt		DateTime	@default(now())
	updatedAt		DateTime	@updatedAt
	login			String		@unique
	password		String
	avatar			String		@default("default_avatar.jpg")
	intraLogin  	String?   @unique
	refreshToken	String?
	games			User_Game[]
}

model Games {
	game_id			Int	@id @default(autoincrement())
	played_at		DateTime	@default(now())
	status			String		@default("unfilled")
	players			User_Game[]
}

model User_Game {
	player		User @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
	user_id		Int
	game		Games @relation(fields: [game_id], references: [game_id], onDelete: Cascade, onUpdate: Cascade)
	game_id		Int
	score		Int
	@@id([user_id , game_id])
}
